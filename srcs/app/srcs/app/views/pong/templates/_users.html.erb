<script type="text/template" id="singleuser-template">
  <td><div class="admin-icon" <%%= admin ? '' : 'style="display:none"' %>>
    <%= show_svg('user-astronaut.svg') %></div>
  </td>
  <td>
    <img class="user_icon<%%= online ? ' user_icon_online' : '' %>"
         width="30px" height="30px" src="<%%= avatar_url %>">
  </td>
<!--  <td><label><%%= id %></label></td>-->
  <td class="users-displayname"><label><%%= displayname %></label></td>
<!--  <td><label><%%= email %></label></td>-->
  <td><label><%%= wins %></label></td>
  <td><label><%%= loses %></label></td>
  <td><label><%%= elo %></label></td>
  <td><label><%%= nickname %></label></td>
</script>

<script type="text/template" id="singlematch-template">
<td><label>Hello, World</label></td>
</script>

<script type="text/template" id="friends-template">
  <td><div class="admin-icon" <%%= admin ? '' : 'style="display:none"' %>>
    <%= show_svg('user-astronaut.svg') %></div>
  </td>
  <td>
    <img class="user_icon<%%= online ? ' user_icon_online' : '' %>"
         width="30px" height="30px" src="<%%= avatar_url %>">
  </td>
  <td width="60%" class="users-displayname"><label><%%= displayname %></label></td>
  <td>
    <button class="btn btn-outline-danger btn-profile-actions" <%%= (status == "friend" && current_user_id == main_id) ? '' : 'style="display:none"' %> <%%= banned ? 'disabled' : '' %>>
      <div class="remove-friend-button">
        Remove
      </div>
    </button>
  </td>
  <td><button class="btn btn-outline-success btn-profile-actions" <%%= (status == "no" && current_user_id == main_id) ? '' : 'style="display:none"' %> <%%= banned ? 'disabled' : '' %>>
  <div class="accept-friend-button">
    Accept Friend
  </div>
</button></td>
</script>


<script type="text/template" id="users-template">
  <h1>Users <button type="button" class="button-sm button-refresh" id="refresh-button">
    <%= show_svg('refresh.svg') %></button></h1>
  <table id="users-table" border-spacing="20px" padding="0 2em 1em 0">
    <tr><th></th><th></th>
<!--  <th>Id</th>-->
      <th class="users-displayname">Display name</th>
<!--  <th>Email</th>-->
      <th>Wins</th>
      <th>Loses</th>
      <th>Elo</th>
      <th>Intra nickname</th></tr>
  </table>
</script>

<script type="text/template" id="user-profile-template">
  <h1><button type="button" class="button-sm button-back" id="back-button"
              onclick="window.history.back();">
      <%= show_svg('arrow-left.svg') %>
    </button>
    Profile
    <button type="button" class="button-sm button-refresh" id="refresh-button">
      <%= show_svg('refresh.svg') %>
    </button>
  </h1>
  <div class="container">
    <div class="row g-2">
      <div class="col-md-4" style="max-height: 550px;">
        <div class="card">
          <div class="card-body">
            <div class="d-flex flex-column align-items-center text-center">
              <img class="rounded-circle user_avatar" width="150px" src="<%%= avatar_url %>" alt="avatar">
              <div class="mt-3">
                <h4 class="profile-displayname"><%%= displayname %></h4>
                <p class="text-secondary mb-1"><%%= online ? 'Online' : 'last seen ' + last_seen_at %></p>
                <p class="text-muted font-size-sm"><%%= email %></p>
                <button class="btn btn-outline-success btn-profile-actions add-friend-button" <%%= banned ? 'disabled' : '' %>>
                  Add Friend
                </button>
                <button id="message_btn" class="btn btn-outline-primary btn-profile-actions" <%%= banned ? 'disabled' : '' %>>
                  Message
                </button>
                <button class="btn btn-outline-warning btn-profile-actions invite-to-battle" <%%= banned ? 'disabled' : '' %>>
                  Invite to Battle
                </button>
              </div>
            </div>
          </div>
        </div>
        <div class="card mt-3">
          <ul class="list-group list-group-flush">
            <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
              <div class="mb-0"><%= show_svg('42_Logo.svg') %> Intra</div>
              <span class="text-secondary">
                <a href="https://profile.intra.42.fr/users/<%%= nickname %>"
                   target="_blank" style="text-decoration: inherit; color: inherit;"><%%= nickname %></a>
              </span>
            </li>
          </ul>
        </div>
        <div class="card mt-3">
          <div class="card-body">
            <h5 class="card-title">Badges/Roles</h5>
            <div class="profile-badges">
              <span class="badge rounded-pill bg-admin text-dark" <%%= admin ? '' : 'style="display:none"' %>>
                Admin
              </span>
              <span class="badge rounded-pill bg-danger text-dark" <%%= banned ? '' : 'style="display:none"' %>>
                Banned
              </span>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card" style="max-height: 550px;">
          <div class="card-body">
            <h5 class="card-header card-title">Stats</h5>
            <ul class="list-group list-group-flush">
              <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                <label class="mb-0">Win/Lose ratio</label>
                <span class="text-secondary">
                    <%%= loses === 0 ? wins/1 : wins/loses %> (<%%= wins %>/<%%= loses %>)
                  </span>
              </li>
              <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                <label class="mb-0">Elo</label><span class="text-secondary"><%%= elo %></span>
              </li>
            </ul>
            <hr>
            <h6 class="card-header card-title">Duels</h6>
            <ul class="list-group list-group-flush">
              <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                <label class="mb-0">Won</label><span class="text-secondary">0</span>
              </li>
              <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                <label class="mb-0">Total</label><span class="text-secondary">0</span>
              </li>
            </ul>
            <hr>
            <h6 class="card-header card-title">Ladder tournaments</h6>
            <ul class="list-group list-group-flush">
              <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                <label class="mb-0">Won</label><span class="text-secondary">0</span>
              </li>
              <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                <label class="mb-0">Total</label><span class="text-secondary">0</span>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card" style="max-height: 550px;">
          <div class="card-body overflow-auto">
            <h5 class="card-header card-title">Friends (<%%= number_of_friends %>)</h5>
              <table id="friends-table" border-spacing="20px" padding="0 2em 1em 0">
              <tr><th></th><th></th>
            </table>
          </div>
        </div>
      </div>
      <div class="row g-2">
        <div class="col-md-12">
          <div class="card">
            <div class="card-body">
              <h5 class="card-header card-title">Match History</h5>
              <table id="matches-table">Placeholder</table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</script>
