
<script type="text/template" id="guild-template-join">
  <div class="row" style="max-width: 1000px; min-width: 300px">
    <div class="col-3"><%%=`<a class="link-light" href="#/guilds/${id}">`%><%%= name %></a> [<%%=anagram %>]</div>
    <div class="col-1"><%%= score %></div>
    <div class="col-2"><%%=`<a class="link-light" href="#/users/${master_id}">`%><%%= master_name %></a></div>
    <div class="col-2"><%= current_user.guild_id %></div>
    <div class="col-2"> <button type="button" class="btn btn-light options-button join" id="join-button">send request</button></div>
  </div>
</script>

<script type="text/template" id="guild-template-cancel">
  <div class="row" style="max-width: 1000px; min-width: 300px">
    <div class="col-3"><%%=`<a class="link-light" href="#/guilds/${id}">`%><%%= name %></a> [<%%=anagram %>]</div>
    <div class="col-1"><%%= score %></div>
    <div class="col-2"><%%=`<a class="link-light" href="#/users/${master_id}">`%><%%= master_name %></a></div>
    <div class="col-2"><%= current_user.guild_id %></div>
    <div class="col-2"> <button type="button" class="btn btn-danger options-button" id="cancel-button">cancel request</button></div>
  </div>
</script>

<script type="text/template" id="guild-template-accept">
  <div class="row" style="max-width: 1000px; min-width: 300px">
    <div class="col-3"><%%=`<a class="link-light" href="#/guilds/${id}">`%><%%= name %></a> [<%%=anagram %>]</div>
    <div class="col-1"><%%= score %></div>
    <div class="col-2"><%%=`<a class="link-light" href="#/users/${master_id}">`%><%%= master_name %></a></div>
    <div class="col-2"><%= current_user.guild_id %></div>
    <div class="col-2"> <button type="button" class="btn btn-light options-button join" id="accept-button">accept invite</button></div>
    <div class="col-1"> <button type="button" class="btn btn-danger options-button" id="decline-button">decline</button></div>
  </div>
</script>

<script type="text/template" id="guild-template-leave">
  <div class="row" style="max-width: 1000px; min-width: 300px">
    <div class="col-3"><%%=`<a class="link-light" href="#/guilds/${id}">`%><%%= name %></a> [<%%=anagram %>]</div>
    <div class="col-1"><%%= score %></div>
    <div class="col-2"><%%=`<a class="link-light" href="#/users/${master_id}">`%><%%= master_name %></a></div>
    <div class="col-2"><%= current_user.guild_id %></div>
    <%if !current_user.guild_master %>
    <div class="col-1"> <button type="button" class="btn btn-danger options-button" id="leave-button">leave</button></div>
    <%end %>
  </div>
</script>

<script type="text/template" id="guild-template-other">
  <div class="row" style="max-width: 1000px; min-width: 300px">
    <div class="col-3"><%%=`<a class="link-light" href="#/guilds/${id}">`%><%%= name %></a> [<%%=anagram %>]</div>
    <div class="col-1"><%%= score %></div>
    <div class="col-2"><%%=`<a class="link-light" href="#/users/${master_id}">`%><%%= master_name %></a></div>
    <div class="col-2"><%= current_user.guild_id %></div>
  </div>
</script>

<script type="text/template" id="guild-template-other-war">
  <div class="row" style="max-width: 1000px; min-width: 300px">
    <div class="col-3"><%%=`<a class="link-light" href="#/guilds/${id}">`%><%%= name %></a> [<%%=anagram %>]</div>
    <div class="col-1"><%%= score %></div>
    <div class="col-2"><%%=`<a class="link-light" href="#/users/${master_id}">`%><%%= master_name %></a></div>
    <div class="col-2"><%= current_user.guild_id %></div>
    <div class="col-2"> <button type="button" class="btn btn-light options-button" data-toggle="modal" data-target="#declareWarModal">declare war</button></div>
  </div>

  <!-- Modal -->
  <div id="declareWarModal" class="modal" tabindex="-1" style="border-radius: 20%">
    <div class="modal-dialog" >
      <div class="modal-content" style="background-color: #2E2F30; justify-content: left!important;">
        <div class="modal-header text-center flex-column">
          <h4 class="modal-title w-100">War declaration</h4>
        </div>
        <form id="war">
        <div class="modal-body">
            <div class="input-group input-group-sm mb-3" style="margin-bottom: 0!important;">
              <div class="input-group-prepend">
                <span class="input-group-text" id="inputGroup-sizing-sm">Wager Points:</span>
              </div>
              <input id="stake" type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" placeholder="from 1 to 1000" pattern="[0-9]{1,1000}" title="value range is from 1 to 1000, only numbers" required>
            </div>
            <p style="font-size: small">Both sides must have enough points to bet!</p>

            <div class="input-group input-group-sm mb-3" style="margin-bottom: 0!important;">
              <div class="input-group-prepend">
                <span class="input-group-text" id="inputGroup-sizing-sm">Max number of unanswered Calls:</span>
              </div>
              <input id="max-unanswered"  type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" pattern="[0-9]" title="numbers only">
            </div>
            <p style="font-size: small">(default: 5)</p>

            <div class="input-group input-group-sm mb-3" style="margin-bottom: 0!important;">
              <div class="input-group-prepend">
                <span class="input-group-text" id="inputGroup-sizing-sm">Max wait for call time:</span>
              </div>
              <input id="wait-time"  type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" placeholder="from 10 to 1440 (=24h)" pattern="[0-9]{10,1440}" title="value range is from 10 to 1440, only numbers">
            </div>
             <p style="font-size: small">(in minutes, default: 10)</p>

            <div style="margin-top: 20px">
              <div class="from-div">War starts</div>
              <div class="to-div">War ends</div>
              <input id="war-start" class="from-div" data-format="dd/MM/yyyy hh:mm:ss" placeholder="from" type="date" name="date"></input>
              <input id="war-end" class="to-div" data-format="dd/MM/yyyy hh:mm:ss" placeholder="to" type="date" name="date">
            </div>

              <div style="margin-top: 90px">
              Select War hours<br>
                <input id="wartime-start" class="from-div" placeholder="from">
                <input id="wartime-end" class="to-div" placeholder="to">
              </div>

              <ul class="options" style="margin-top: 50px">Include matches of types:
                <li class="w"> <input type="checkbox" id="include-tournament">&nbsp;Tournament</li>
                <li class="w"><input type="checkbox" id="include-duel">&nbsp;Duel</li>
                <li class="w"><input type="checkbox" id="include-ladder">&nbsp;Ladder</li>
              </ul>
        </div>
        <div class="modal-confirm modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
          <button type="submit"  class="btn btn-primary">Declare war</button> </div>
          </form>
      </div>
    </div>
  </div>
</script>

<script type="text/template" id="guild-template-invite">
  <div class="row" style="max-width: 1000px; min-width: 300px">
    <div class="col-3"><%%=`<a class="link-light" href="#/guilds/${id}">`%><%%= name %></a> [<%%=anagram %>]</div>
    <div class="col-1"><%%= score %></div>
    <div class="col-2"><%%=`<a class="link-light" href="#/users/${master_id}">`%><%%= master_name %></a></div>
    <div class="col-2"><%= current_user.guild_id %></div>
    <div class="col-1"> <button type="button" class="btn btn-light options-button join" id="accept-button">accept</button></div>
    <div class="col-1"> <button type="button" class="btn btn-danger options-button" id="decline-button">decline</button></div>
  </div>
</script>

<script>
    function openForm() {
        document.getElementById("newGuildForm").style.display = "block"; }
    function closeForm() {
        document.getElementById("newGuildForm").style.display = "none";
    }
</script>

<script type="text/template" id="guilds-template">
  <h1>Guilds
    <button type="button" class="button-sm" id="refresh-button">
    <%= show_svg('refresh.svg') %></button>
  </h1>
    <div class="row" style="max-width: 1000px; min-width: 300px">
      <div class="col-3">Name</div>
      <div class="col-1">Score</div>
      <div class="col-2">Master</div>
      <div class="col-2">Wars</div>
    </div>
</script>

<script type="text/template" id="guilds-template-create">
    <button class="open-button" onclick="openForm()">Create Guild</button>
    <div class="form-popup" id="newGuildForm">
      <form id="create-guild" class="form-container">
        <input type="text" class="form-control" id="newGuildName" placeholder="The Guild Name" pattern="[A-Za-z ]{3,20}" required="required" title="Guild Name can only have 3-20 letters, no special symbols allowed"><br>
        <button type="submit" class="btn btn-success">Create Guild</button>
        <button type="button" class="btn btn-danger" onclick="closeForm()">Cancel</button>
      </form>
    </div>
  <h1>Guilds <button type="button" class="button-sm" id="refresh-button">
    <%= show_svg('refresh.svg') %></button></h1>
  <div class="row" style="max-width: 1000px; min-width: 300px">
    <div class="col-3">Name</div>
    <div class="col-1">Score</div>
    <div class="col-2">Master</div>
    <div class="col-2">Wars</div>
  </div>
</script>

<script type="text/template" id="guild-profile-template">
  <h1><button type="button" class="button-sm button-back" id="back-button"
              onclick="window.history.back();">
    <%= show_svg('arrow-left.svg') %>
  </button>
    <%%= name %>&nbsp;<span style="color:grey;font-size: 30px">[<%%= anagram%>]</span>
    <button type="button" class="button-sm button-refresh" id="refresh-button">
      <%= show_svg('refresh.svg') %>
    </button>
  </h1>
  <div class="row"><a>Current score:&nbsp;<%%= score %></a></div>
  <div class="row"><%%=`<a class="link-light" href="#/guilds/${id}/members">members</a>`%></div>
  <div class="row"><%%=`<a class="link-light" href="#/guilds/${id}/wars">war history</a>`%></div>
</script>

<script type="text/template" id="guild-edit-officer-template">
  <h1><button type="button" class="button-sm button-back" id="back-button"
              onclick="window.history.back();">
    <%= show_svg('arrow-left.svg') %>
  </button>
    <%%= name %>&nbsp;<span style="color:grey;font-size: 30px">[<%%= anagram%>]</span>
    <button type="button" class="button-sm button-refresh" id="refresh-button">
      <%= show_svg('refresh.svg') %>
    </button>
  </h1>
  <div class="row">Current score:&nbsp;<%%= score %></div>
  <div class="row"><%%=`<a class="link-light" href="#/guilds/${id}/members">members</a>`%></div>
  <div class="row"><%%=`<a class="link-light" href="#/guilds/${id}/wars">war history</a>`%></div>
  <div class="row"><%%=`<a class="link-light" href="#/guilds/${id}/requests">join requests</a>`%></div>
  <div class="row"><%%=`<a class="link-light" href="#/users_not_in_guild">invite users</a>`%></div>
</script>

<script type="text/template" id="guild-edit-master-template">
  <h1><button type="button" class="button-sm button-back" id="back-button"
              onclick="window.history.back();">
    <%= show_svg('arrow-left.svg') %>
  </button>
    <%%= name %>
    <button type="button" class="button-sm button-refresh" id="refresh-button">
      <%= show_svg('refresh.svg') %>
    </button>
  </h1>
  <div class="row" style="margin-bottom: 20px">
    <div class="col-2"><button type="button" class="btn btn-danger options-button"
                               data-target="#deleteGuildModal" data-toggle="modal">Delete guild
    </button></div>
  </div>
  <div class="row" style="margin-left: 0px">Anagram:&nbsp;
      <input type="text" class="form-control" id="anagram"
             value="<%%= anagram %>"
             style="width: 6ch; background-color: #00000e; color:white; padding: 1px;">
      <!--<pattern="[A-Za-z0-9]{2,5}" required="required" title="Anagram can only have 2-5 letters, no whitespaces or special symbols allowed"></pattern>-->
  </div>
  <div class="row" style="margin-left: 0px">Current score:&nbsp;<%%= score %></div>
  <div class="row"><%%=`<a class="link-light" href="#/guilds/${id}/members">members</a>`%></div>
  <div class="row"><%%=`<a class="link-light" href="#/guilds/${id}/wars">war history</a>`%></div>
  <div class="row"><%%=`<a class="link-light" href="#/guilds/${id}/requests">join requests</a>`%></div>
  <div class="row"><%%=`<a class="link-light" href="#/users_not_in_guild">invite users</a>`%></div>
  <div class="row"><%%=`<a class="link-light" href="#/guilds/${id}/war_invites">war invites from other guilds</a>`%></div>
  <div class="row"><%%=`<a class="link-light" href="#/guilds/${id}/war_requests">war requests sent by you</a>`%></div>

  <!-- Modal HTML -->
  <div id="deleteGuildModal" class="modal">
    <div class="modal-dialog modal-confirm">
      <div class="modal-content">
        <div class="modal-header flex-column">
          <div class="icon-box">
            <i class="material-icons">&#xE5CD;</i>
          </div>
          <h4 class="modal-title w-100">Are you sure?</h4>
          <!-- <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>-->
         </div>
         <div class="modal-body">
           <p style="color:gray">Guild will be deleted permanently</p>
         </div>
         <div class="modal-footer justify-content-center">
           <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
           <button type="button" class="btn btn-danger" data-dismiss="modal" id="delete-button">Delete</button>
         </div>
       </div>
     </div>
   </div>
</script>
